<div class="navbar navbar-fixed-top" ng-click="removeFocus($event)">
	<div class="navbar-inner">
		<div class="container" style="width: auto;">
			<img id="logoAnteaCalendar" src="img/Antea_logo_colore_def.png" class="brand">
			<div name="calendarDiv" class="span1.5"><h4><i class="icon-calendar"></i> Calendario:</h4></div>
			<div name="calendarDiv" class="span3" property="span">
				<div id="calendarCarousel" class="carousel slide" data-interval="false">
					<div class="carousel-inner">
						<div ng-repeat="calendario in calendar" class="{{calendario.active}}item">
							<h4><span id="calendarMonth" ng-model="selectedMonth">{{calendario.monthDescription}}  </span><span id="calendarMonth" ng-model="selectedYear">  {{calendario.year}}</span></h4>
						</div>
					</div>
					<a id="freccia" class="carousel-control left" ng-click="prev()">&lsaquo;</a>
					<a id="freccia" class="carousel-control right" ng-click="next()">&rsaquo;</a>
				</div>
			</div>
			<div id="loadingDiv"><span id="inline" name="img"><img id="loadingAntea" src="img/Antea_loading.png" class="brand"></span><span id="inline"><h5>Caricamento...</h5></span></div>
			<div id="loadedSuccessDiv" ng-hide="true"><span id="inline" name="img"><img id="loadingAntea" src="img/ok.png" class="brand"></span><span id="inline"><h5>Operazione eseguita</h5></span></div>
			<div id="loadedErrorDiv" ng-hide="true"><span id="inline" name="img"><img id="loadingAntea" src="img/stop.png" class="brand"></span><span id="inline"><h5>Operazione fallita</h5></span></div>
			<ul class="nav pull-right">
				<li class="dropdown">
					<a id="dropuser" href="#" role="button" class="dropdown-toggle brand" data-toggle="dropdown" ng-repeat="user in users">
						{{user.nome}}
						<b class="caret"></b>
					</a>
					<ul class="dropdown-menu" role="menu" aria-labelledby="dropuser">
						<li role="presentation">
							<a role="menuitem" tabindex="-1" href="#/salgemmainterface"><i class="icon-info-sign"></i> Info</a>
							<a role="menuitem" tabindex="-1" href="#modalProfilo" data-toggle="modal"><i class="icon-user"></i> Profilo</a>
							<a role="menuitem" tabindex="-1" href="#/salgemmainterface/logout"><i class="icon-off"></i> Logout</a>
						</li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
</div>
<div id="modalProfilo" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3 ng-repeat="user in users">Profilo di {{user.nome}}</h3>
	</div>
	<div class="modal-body" ng-repeat="user in users">
		<button class="btn" ng-click="userEditChange()" ng-hide="userEdit"><i class="icon-edit"></i> Modifica</button>
		<button class="btn" ng-click="saveUserEdit(editnome, editmail, editcel, edittel, editaddress, editcap, editcitta, editprov, editnazione, editcod, editpiva)" ng-show="userEdit"><i class="icon-ok"></i> Salva</button>
		<button class="btn" ng-click="discardUserEdit(editnome, editmail, editcel, edittel, editaddress, editcap, editcitta, editprov, editnazione, editcodf, editpiva)" ng-show="userEdit"><i class="icon-remove"></i> Annulla</button>
		<form class="form-horizontal" id="userEdit">
			<div class="control-group">
				<label class="control-label" for="inputName">Nome: </label>
				<label class="control-label" for="inputName" ng-hide="userEdit"><strong>{{user.nome}}</strong></label>
				<div class="controls">
					<input type="text" id="inputName" placeholder="{{user.nome && user.nome || 'Nome'}}" ng-show="userEdit" ng-model="editnome">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputEmail">E-mail: </label>
				<label class="control-label" for="inputEmail" ng-hide="userEdit"><strong>{{user.email}}</strong></label>
				<div class="controls">
					<input type="text" id="inputEmail" placeholder="{{user.email && user.email || 'Email'}}" ng-show="userEdit" ng-model="editmail">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputCel">Cellulare: </label>
				<label class="control-label" for="inputCel" ng-hide="userEdit"><strong>{{user.cellulare}}</strong></label>
				<div class="controls">
					<input type="text" id="inputCel" placeholder="{{user.cellulare && user.cellulare || 'Cellulare'}}" ng-show="userEdit" ng-model="editcel">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputTel">Telefono: </label>
				<label class="control-label" for="inputTel" ng-hide="userEdit"><strong>{{user.telefono}}</strong></label>
				<div class="controls">
					<input type="text" id="inputTel" placeholder="{{user.telefono && user.telefono || 'Telefono'}}" ng-show="userEdit" ng-model="edittel">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputAddress">Indirizzo: </label>
				<label class="control-label" for="inputAddress" ng-hide="userEdit"><strong>{{user.indirizzo}} {{user.cap}},{{user.citta}} ({{user.provincia}},{{user.nazione}})</strong></label>
				<div class="controls">
					<input type="text" id="inputAddress" placeholder="{{user.indirizzo && user.indirizzo || 'Indirizzo'}}" ng-show="userEdit" ng-model="editaddress">
					<input type="text" id="inputAddress" placeholder="{{user.cap && user.cap || 'Cap'}}" ng-show="userEdit" ng-model="editcap">
					<input type="text" id="inputAddress" placeholder="{{user.citta && user.citta || 'Città'}}" ng-show="userEdit" ng-model="editcitta">
					<input type="text" id="inputAddress" placeholder="{{user.provincia && user.provincia || 'Provincia'}}" ng-show="userEdit" ng-model="editprov">
					<input type="text" id="inputAddress" placeholder="{{user.nazione && user.nazione || 'Nazione'}}" ng-show="userEdit" ng-model="editnazione">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputCodF">Cod.Fiscale: </label>
				<label class="control-label" for="inputCodF" ng-hide="userEdit"><strong>{{user.codicefiscale}}</strong></label>
				<div class="controls">
					<input type="text" id="inputCodF" placeholder="{{user.codicefiscale && user.codicefiscale || 'Codice Fiscale'}}" ng-show="userEdit" ng-model="editcodf">
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="inputPiva">P.Iva: </label>
				<label class="control-label" for="inputPiva" ng-hide="userEdit"><strong>{{user.partitaiva}}</strong></label>
				<div class="controls">
					<input type="text" id="inputPiva" placeholder="{{user.partitaiva && user.partitaiva || 'Partita Iva'}}" ng-show="userEdit" ng-model="editpiva">
				</div>
			</div>
			<div class="control-group">
				<button class="btn" ng-click="editPwChange()" ng-hide="editpw"><i class="icon-eye-open"></i> Modifica Password</button>
			</div>
			<div class="well" ng-show="editpw" id="wellPw">
				<h5>Modifica Password:</h5>
				<div class="control-group {{oldPwWrong}}">
					<label class="control-label" for="inputOldPw">Vecchia password: </label>
					<div class="controls">
						<input type="password" id="inputOldPw" placeholder="" ng-model="editoldpw" autofocus>
						<span ng-show="oldPwWrong" class="help-inline">Vecchia password errata</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="inputNewPw">Nuova password: </label>
					<div class="controls">
						<input type="password" id="inputNewPw" placeholder="" ng-model="editnewpw">
					</div>
				</div>
				<div class="control-group {{mismatchNewPw}}">
					<label class="control-label" for="inputReNewPw">Reinserire nuova password: </label>
					<div class="controls">
						<input type="password" id="inputReNewPw" placeholder="" ng-model="editrenewpw">
						<span ng-show="mismatchNewPw" class="help-inline">Nuove password differenti</span>
					</div>
				</div>
				<div class="control-group">
					<button class="btn" ng-click="saveUserPw(editoldpw, editnewpw, editrenewpw)"><i class="icon-ok"></i> Salva</button>
					<button class="btn" ng-click="discardUserPw(editoldpw, editnewpw, editrenewpw)"><i class="icon-remove"></i> Annulla</button>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<a href="#" class="btn" data-dismiss="modal" aria-hidden="true" ng-click="userEdit=false"><i class="icon-remove"></i> Chiudi</a>
	</div>
</div>
<div name="mainDiv" id="bigDiv" class="container-fluid" ng-click="removeFocus($event)">
	<div class="row-fluid" name="notMainDiv">
		<div class="span1" ng-show="dinamicHide"><button class="btn btn-info" ng-click="dinamicMenuFilter()" name="filterBtn"><i class="icon-list"></i> {{dinamicLabelBtn}}</button></div>
		<div class="span2" property="span" ng-hide="dinamicHide">
			<div class="well">
				<div>
					<button class="btn btn-info" ng-click="dinamicMenuFilter()" ng-hide="dinamicHide">{{dinamicLabelBtn}}</button>
					<h5><i class="icon-list"></i> Ordini visualizzati:</h5>
					<ul class="unstyled">
						<li>
							<input type="checkbox" ng-click="selectOrDeselectAll()" checked> 
							<span><strong>Seleziona Tutto</strong></span>
						</li>
						<hr>
						<li ng-repeat="ordine in ordini">
							<input type="checkbox" ng-model="ordine.selected">
							<span>{{ordine.descrizione}}</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="span{{dinamicSpan}}" property="span" name="table" id="loadedDiv" ng-cloak>
			<div>
				<table class="table table-bordered" ng-cloak>
					<thead ng-cloak>
						<tr>
							<th id="headers" name="headers">Ordine</th>
							<th id="headers" name="headers">Attività</th>
							<th ng-repeat="day in month" id="headers" name="headers"><p class="we-{{day.isWeekend}}">{{day.day}}</p><p class="we-{{day.isWeekend}}">{{day.number}}</p></th>
							<th id="headers" name="headers">Totale</th>
						</tr>
					</thead>
					<tbody ng-cloak>
						<tr ng-repeat="task in tasks | taskFilter" ng-cloak class="rowSelected-{{rowSelected}}">
							<td id="headers"><h5 ng-show="task.show">{{task.order.descrizione}}</h5></td>
							<td id="headers"><h5>{{task.descrizione}}</h5></td>
							<td id="repeatedMonth" ng-repeat="day in task.mese" class="editable-{{day.editable}} focused-{{focused}} wend-{{day.isWeekend}} planned-{{day.planned}}" key-focus ng-click="tdClick($event, $index, task)">
								<input name="formInput" type="checkbox" ng-model="editmode" id="check-{{task.ids[0]}}-{{$index}}" ng-click="focusOn($event, $index, task)" tabindex="-1" ng-show="!day.editable">
								<form popover class="form-inline" ng-hide="editmode && day.editable" id="form-{{task.ids[0]}}-{{$index}}" name="form">
									<label>{{day.ore}}{{day.unimis}}</label>
									<i class="icon-comment" ng-show="day.note"></i>
								</form>
								<form class="form-horizontal" ng-show="editmode && day.editable">
									<div class="control-group {{validator}}">
										<!--label name="formInput" class="control-label" for="ore">Ore:</label-->
										<div class="controls" name="formInput">
											<input name="formInput" type="text" id="ore-{{task.ids[0]}}-{{$index}}" ng-model="editore" placeholder="{{day.ore && day.ore || 'Ore'}}" ng-change="validate(editore)" focus-me="editmode" tabindex="1">
											<button class="btn control-button" name="formInput" ng-click="save($index, day, task, editore, editnote)" tabindex="3"><i class="icon-ok"></i></button>
										</div>
									</div>
									<div class="control-group">
										<!--label name="formInput" class="control-label" for="note">Note:</label-->
										<div class="controls" name="formInput">
											<input name="formInput" type="text" id="note" ng-model="editnote" placeholder="{{day.note && day.note || 'Note'}}" tabindex="2">
											<button class="btn control-button" name="formInput" ng-click="discard($index, day, task, editore, editnote)" tabindex="4"><i class="icon-remove"></i></button>
										</div>
									</div>
									<!--div class="control-group">
										<div class="controls" name="formInput">
											<button class="btn" name="formInput" ng-click="save($index, day, task, editore, editnote)"><i class="icon-ok"></i> OK</button>
											<button class="btn" name="formInput" ng-click="discard($index, day, task, editore, editnote)"><i class="icon-remove"></i> Annulla</button>
										</div>
									</div-->
								</form>
							</td>
							<td id="headers" name="headers"><h5>{{task.total}}</h5></td>
						</tr>
					</tbody>
					<tfoot ng-cloak>
						<tr>
							<th id="headers" name="headers">Totale</th>
							<td id="headers" name="headers"><h5>Totale</h5></td>
							<td ng-repeat="taskDay in totalTask" id="headers" name="headers"><h5>{{taskDay.ore}}</h5></td>
							<th id="headers" name="headers">{{totalMonth}}</th>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>
	</div>
</div>